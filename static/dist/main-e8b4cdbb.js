var Qe=Object.defineProperty;var Ze=(t,e,n)=>e in t?Qe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var pe=(t,e,n)=>(Ze(t,typeof e!="symbol"?e+"":e,n),n);function B(){}const je=t=>t;function Be(t){return t()}function Ee(){return Object.create(null)}function q(t){t.forEach(Be)}function x(t){return typeof t=="function"}function ce(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let ie;function Re(t,e){return ie||(ie=document.createElement("a")),ie.href=e,t===ie.href}function xe(t){return Object.keys(t).length===0}const $e=typeof window<"u";let et=$e?()=>window.performance.now():()=>Date.now(),we=$e?t=>requestAnimationFrame(t):B;const W=new Set;function ze(t){W.forEach(e=>{e.c(t)||(W.delete(e),e.f())}),W.size!==0&&we(ze)}function tt(t){let e;return W.size===0&&we(ze),{promise:new Promise(n=>{W.add(e={c:t,f:n})}),abort(){W.delete(e)}}}function L(t,e){t.appendChild(e)}function Xe(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function nt(t){const e=T("style");return e.textContent="/* empty */",rt(Xe(t),e),e.sheet}function rt(t,e){return L(t.head||t,e),e.sheet}function S(t,e,n){t.insertBefore(e,n||null)}function F(t){t.parentNode&&t.parentNode.removeChild(t)}function ye(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function T(t){return document.createElement(t)}function $(t){return document.createTextNode(t)}function N(){return $(" ")}function lt(){return $("")}function k(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function Q(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function p(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function it(t){return Array.from(t.childNodes)}function He(t,e){e=""+e,t.data!==e&&(t.data=e)}function U(t,e,n){t.classList.toggle(e,!!n)}function We(t,e,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:r})}const fe=new Map;let ue=0;function ot(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}function st(t,e){const n={stylesheet:nt(e),rules:{}};return fe.set(t,n),n}function De(t,e,n,r,l,o,s,i=0){const c=16.666/r;let f=`{
`;for(let d=0;d<=1;d+=c){const w=e+(n-e)*o(d);f+=d*100+`%{${s(w,1-w)}}
`}const h=f+`100% {${s(n,1-n)}}
}`,u=`__svelte_${ot(h)}_${i}`,a=Xe(t),{stylesheet:b,rules:_}=fe.get(a)||st(a,t);_[u]||(_[u]=!0,b.insertRule(`@keyframes ${u} ${h}`,b.cssRules.length));const g=t.style.animation||"";return t.style.animation=`${g?`${g}, `:""}${u} ${r}ms linear ${l}ms 1 both`,ue+=1,u}function ft(t,e){const n=(t.style.animation||"").split(", "),r=n.filter(e?o=>o.indexOf(e)<0:o=>o.indexOf("__svelte")===-1),l=n.length-r.length;l&&(t.style.animation=r.join(", "),ue-=l,ue||ut())}function ut(){we(()=>{ue||(fe.forEach(t=>{const{ownerNode:e}=t.stylesheet;e&&F(e)}),fe.clear())})}let ee;function Z(t){ee=t}function Ie(){if(!ee)throw new Error("Function called outside component initialization");return ee}function ct(t){Ie().$$.on_destroy.push(t)}function at(){const t=Ie();return(e,n,{cancelable:r=!1}={})=>{const l=t.$$.callbacks[e];if(l){const o=We(e,n,{cancelable:r});return l.slice().forEach(s=>{s.call(t,o)}),!o.defaultPrevented}return!0}}function oe(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(r=>r.call(this,e))}const H=[],te=[];let I=[];const Le=[],dt=Promise.resolve();let ve=!1;function _t(){ve||(ve=!0,dt.then(Je))}function z(t){I.push(t)}const ge=new Set;let X=0;function Je(){if(X!==0)return;const t=ee;do{try{for(;X<H.length;){const e=H[X];X++,Z(e),ht(e.$$)}}catch(e){throw H.length=0,X=0,e}for(Z(null),H.length=0,X=0;te.length;)te.pop()();for(let e=0;e<I.length;e+=1){const n=I[e];ge.has(n)||(ge.add(n),n())}I.length=0}while(H.length);for(;Le.length;)Le.pop()();ve=!1,ge.clear(),Z(t)}function ht(t){if(t.fragment!==null){t.update(),q(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(z)}}function mt(t){const e=[],n=[];I.forEach(r=>t.indexOf(r)===-1?e.push(r):n.push(r)),n.forEach(r=>r()),I=e}let G;function pt(){return G||(G=Promise.resolve(),G.then(()=>{G=null})),G}function be(t,e,n){t.dispatchEvent(We(`${e?"intro":"outro"}${n}`))}const se=new Set;let A;function M(){A={r:0,c:[],p:A}}function j(){A.r||q(A.c),A=A.p}function R(t,e){t&&t.i&&(se.delete(t),t.i(e))}function O(t,e,n,r){if(t&&t.o){if(se.has(t))return;se.add(t),A.c.push(()=>{se.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}else r&&r()}const gt={duration:0};function J(t,e,n,r){let o=e(t,n,{direction:"both"}),s=r?0:1,i=null,c=null,f=null,h;function u(){f&&ft(t,f)}function a(_,g){const d=_.b-s;return g*=Math.abs(d),{a:s,b:_.b,d,duration:g,start:_.start,end:_.start+g,group:_.group}}function b(_){const{delay:g=0,duration:d=300,easing:w=je,tick:m=B,css:v}=o||gt,D={start:et()+g,b:_};_||(D.group=A,A.r+=1),"inert"in t&&(_?h!==void 0&&(t.inert=h):(h=t.inert,t.inert=!0)),i||c?c=D:(v&&(u(),f=De(t,s,_,d,g,w,v)),_&&m(0,1),i=a(D,d),z(()=>be(t,_,"start")),tt(y=>{if(c&&y>c.start&&(i=a(c,d),c=null,be(t,i.b,"start"),v&&(u(),f=De(t,s,i.b,i.duration,0,w,o.css))),i){if(y>=i.end)m(s=i.b,1-s),be(t,i.b,"end"),c||(i.b?u():--i.group.r||q(i.group.c)),i=null;else if(y>=i.start){const C=y-i.start;s=i.a+i.d*w(C/i.duration),m(s,1-s)}}return!!(i||c)}))}return{run(_){x(o)?pt().then(()=>{o=o({direction:_?"in":"out"}),b(_)}):b(_)},end(){u(),i=c=null}}}function V(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function ae(t){t&&t.c()}function ne(t,e,n){const{fragment:r,after_update:l}=t.$$;r&&r.m(e,n),z(()=>{const o=t.$$.on_mount.map(Be).filter(x);t.$$.on_destroy?t.$$.on_destroy.push(...o):q(o),t.$$.on_mount=[]}),l.forEach(z)}function re(t,e){const n=t.$$;n.fragment!==null&&(mt(n.after_update),q(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function bt(t,e){t.$$.dirty[0]===-1&&(H.push(t),_t(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function de(t,e,n,r,l,o,s,i=[-1]){const c=ee;Z(t);const f=t.$$={fragment:null,ctx:[],props:o,update:B,not_equal:l,bound:Ee(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:Ee(),dirty:i,skip_bound:!1,root:e.target||c.$$.root};s&&s(f.root);let h=!1;if(f.ctx=n?n(t,e.props||{},(u,a,...b)=>{const _=b.length?b[0]:a;return f.ctx&&l(f.ctx[u],f.ctx[u]=_)&&(!f.skip_bound&&f.bound[u]&&f.bound[u](_),h&&bt(t,u)),a}):[],f.update(),h=!0,q(f.before_update),f.fragment=r?r(f.ctx):!1,e.target){if(e.hydrate){const u=it(e.target);f.fragment&&f.fragment.l(u),u.forEach(F)}else f.fragment&&f.fragment.c();e.intro&&R(t.$$.fragment),ne(t,e.target,e.anchor),Je()}Z(c)}class _e{constructor(){pe(this,"$$");pe(this,"$$set")}$destroy(){re(this,1),this.$destroy=B}$on(e,n){if(!x(n))return B;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const l=r.indexOf(n);l!==-1&&r.splice(l,1)}}$set(e){this.$$set&&!xe(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const vt="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(vt);function Y(t,{delay:e=0,duration:n=400,easing:r=je}={}){const l=+getComputedStyle(t).opacity;return{delay:e,duration:n,easing:r,css:o=>`opacity: ${o*l}`}}const wt=t=>{var e;return((e=document.cookie.match("(^|;)\\s*"+t+"\\s*=\\s*([^;]+)"))==null?void 0:e.pop())||""},he=wt("csrftoken"),le="https://drive.coxy.tech/api/";function yt(t){const e=new URL("files",le);return t?e.searchParams.set("source",t):e.searchParams.delete("source"),fetch(e)}function kt(t,e,n){const r=new URL("upload",le),l=new FormData;l.append("destination",t);for(let o=0;o<e.length;o++)l.append(`file_${o}`,e[o]);n.open("POST",r),n.setRequestHeader("X-CSRFToken",he),n.send(l)}function Et(t){const e=new URL("delete",le),n=new Request(e,{method:"DELETE",headers:{"X-CSRFToken":he},body:JSON.stringify({source:t})});return fetch(n)}function Ve(t,e){const n=new URL("move",le),r=new Request(n,{method:"PUT",headers:{"X-CSRFToken":he},body:JSON.stringify({source:t,destination:e})});return fetch(r)}function Rt(t,e){const n=new URL("rename",le),r=new Request(n,{method:"PUT",headers:{"X-CSRFToken":he},body:JSON.stringify({source:t,name:e})});return fetch(r)}function Dt(t){let e,n=t[0].name+"",r,l,o;return{c(){e=T("button"),r=$(n),p(e,"class","breadcrumbs__item"),U(e,"breadcrumbs__item--hovering",t[2])},m(s,i){S(s,e,i),L(e,r),l||(o=[k(e,"click",t[7]),k(e,"drop",t[3]),k(e,"dragover",t[4]),k(e,"dragleave",t[5])],l=!0)},p(s,[i]){i&1&&n!==(n=s[0].name+"")&&He(r,n),i&4&&U(e,"breadcrumbs__item--hovering",s[2])},i:B,o:B,d(s){s&&F(e),l=!1,q(o)}}}function Lt(t,e,n){let{breadcrumb:r,action:l,last:o}=e,s=!1;function i(u){n(2,s=!1);const a=u.dataTransfer.getData("name"),b=u.dataTransfer.getData("path");a&&b&&Ve(b,r.path+a)}function c(u){o||(u.preventDefault(),n(2,s=!0))}function f(){n(2,s=!1)}const h=()=>l(r);return t.$$set=u=>{"breadcrumb"in u&&n(0,r=u.breadcrumb),"action"in u&&n(1,l=u.action),"last"in u&&n(6,o=u.last)},[r,l,s,i,c,f,o,h]}class Tt extends _e{constructor(e){super(),de(this,e,Lt,Dt,ce,{breadcrumb:0,action:1,last:6})}}function Ft(t){let e,n;return{c(){e=T("div"),p(e,"class","file__thumbnail"),p(e,"style",n=t[0].thumbnail?`background-image: url(${t[0].thumbnail});`:"")},m(r,l){S(r,e,l)},p(r,l){l&1&&n!==(n=r[0].thumbnail?`background-image: url(${r[0].thumbnail});`:"")&&p(e,"style",n)},d(r){r&&F(e)}}}function Te(t){let e,n,r,l,o,s,i,c,f,h,u;function a(d,w){return d[6]?St:Ot}let _=a(t)(t),g=!t[6]&&Ct(t);return{c(){e=T("div"),n=T("button"),_.c(),r=N(),g&&g.c(),l=N(),o=T("button"),o.textContent="Rename",s=N(),i=T("button"),i.textContent="Delete",p(n,"class","file__option"),p(o,"class","file__option"),p(i,"class","file__option"),p(e,"class","file__option-list"),p(e,"tabindex","-1"),p(e,"role","button")},m(d,w){S(d,e,w),L(e,n),_.m(n,null),L(e,r),g&&g.m(e,null),L(e,l),L(e,o),L(e,s),L(e,i),t[19](e),f=!0,h||(u=[k(n,"click",t[18]),k(o,"click",t[8]),k(i,"click",t[9]),k(e,"click",Q(t[17])),k(e,"keydown",t[20]),k(e,"focusin",t[10]),k(e,"focusout",t[11]),k(e,"introstart",t[21])],h=!0)},p(d,w){d[6]||g.p(d,w)},i(d){f||(d&&z(()=>{f&&(c||(c=J(e,Y,{duration:100},!0)),c.run(1))}),f=!0)},o(d){d&&(c||(c=J(e,Y,{duration:100},!1)),c.run(0)),f=!1},d(d){d&&F(e),_.d(),g&&g.d(),t[19](null),d&&c&&c.end(),h=!1,q(u)}}}function Ot(t){let e;return{c(){e=$("Preview")},m(n,r){S(n,e,r)},d(n){n&&F(e)}}}function St(t){let e;return{c(){e=$("Open")},m(n,r){S(n,e,r)},d(n){n&&F(e)}}}function Ct(t){let e,n,r;return{c(){e=T("a"),n=$("Download"),p(e,"class","file__option"),p(e,"href",r=t[0].url),p(e,"target","_blank"),p(e,"download","")},m(l,o){S(l,e,o),L(e,n)},p(l,o){o&1&&r!==(r=l[0].url)&&p(e,"href",r)},d(l){l&&F(e)}}}function Nt(t){let e,n,r,l=t[0].name+"",o,s,i,c,f,h,u=!t[6]&&Ft(t),a=t[2]&&Te(t);return{c(){e=T("div"),u&&u.c(),n=N(),r=T("div"),o=$(l),s=N(),i=T("button"),c=N(),a&&a.c(),p(r,"class","file__title"),p(i,"class","file__option-button"),p(e,"class","file"),p(e,"draggable","true"),p(e,"tabindex","-1"),p(e,"role","gridcell"),U(e,"file--selected",t[7]),U(e,"file--dragging",t[3]),U(e,"file--hovering",t[4])},m(b,_){S(b,e,_),u&&u.m(e,null),L(e,n),L(e,r),L(r,o),L(e,s),L(e,i),L(e,c),a&&a.m(e,null),f||(h=[k(i,"click",Q(t[10])),k(e,"click",t[22]),k(e,"contextmenu",t[10]),k(e,"dragstart",t[12]),k(e,"dragend",t[13]),k(e,"drop",t[14]),k(e,"dragover",t[15]),k(e,"dragleave",t[16])],f=!0)},p(b,[_]){b[6]||u.p(b,_),_&1&&l!==(l=b[0].name+"")&&He(o,l),b[2]?a?(a.p(b,_),_&4&&R(a,1)):(a=Te(b),a.c(),R(a,1),a.m(e,null)):a&&(M(),O(a,1,1,()=>{a=null}),j()),_&8&&U(e,"file--dragging",b[3]),_&16&&U(e,"file--hovering",b[4])},i(b){R(a)},o(b){O(a)},d(b){b&&F(e),u&&u.d(),a&&a.d(),f=!1,q(h)}}}function Pt(t,e,n){let{file:r,action:l}=e;const o=at();let s=r.type=="folder",i=!1,c=!1,f=!1,h=!1,u;function a(){const E=prompt(`Rename ${s?"folder":"file"}`,r.name);E&&Rt(r.path,E).then(async K=>{K.ok&&n(0,r=await K.json())})}function b(){confirm(`Delete ${s?"folder":"file"}`)&&Et(r.path).then(async E=>{E.ok&&o("remove")})}async function _(){n(2,i=!0)}function g(E){(!E||!u.contains(E.relatedTarget))&&n(2,i=!1)}function d(E){n(3,f=!0),E.dataTransfer.setData("name",r.name),E.dataTransfer.setData("path",r.path)}function w(E){n(3,f=!1),E.dataTransfer.dropEffect!=="none"&&o("remove")}function m(E){n(4,h=!1);const K=E.dataTransfer.getData("name"),ke=E.dataTransfer.getData("path");K&&ke&&Ve(ke,r.path+K)}function v(E){s&&!f&&(E.preventDefault(),n(4,h=!0))}function D(){s&&n(4,h=!1)}function y(E){oe.call(this,t,E)}const C=()=>l(r);function P(E){te[E?"unshift":"push"](()=>{u=E,n(5,u)})}const me=E=>{E.key=="Escape"&&g()},Ke=()=>u.focus(),Ge=()=>l(r);return t.$$set=E=>{"file"in E&&n(0,r=E.file),"action"in E&&n(1,l=E.action)},[r,l,i,f,h,u,s,c,a,b,_,g,d,w,m,v,D,y,C,P,me,Ke,Ge]}class Ye extends _e{constructor(e){super(),de(this,e,Pt,Nt,ce,{file:0,action:1})}}function Ut(t){let e,n,r,l,o,s,i,c,f,h,u;return{c(){e=T("div"),n=T("div"),r=T("img"),s=N(),i=T("button"),p(r,"class","preview-modal__img"),Re(r.src,l=t[0].url)||p(r,"src",l),p(r,"alt",o=t[0].name),p(i,"class","preview-modal__close"),p(n,"class","preview-modal__dialog"),p(n,"role","presentation"),U(n,"preview-modal__dialog--fly",t[2]),p(e,"class","preview-modal"),p(e,"tabindex","-1"),p(e,"role","presentation")},m(a,b){S(a,e,b),L(e,n),L(n,r),L(n,s),L(n,i),t[7](e),f=!0,h||(u=[k(i,"click",function(){x(t[1])&&t[1].apply(this,arguments)}),k(n,"click",Q(t[5])),k(n,"keypress",Q(t[6])),k(e,"click",function(){x(t[1])&&t[1].apply(this,arguments)}),k(e,"keydown",t[8]),k(e,"contextmenu",Q(t[4])),k(e,"introstart",t[9]),k(e,"outrostart",t[10])],h=!0)},p(a,[b]){t=a,(!f||b&1&&!Re(r.src,l=t[0].url))&&p(r,"src",l),(!f||b&1&&o!==(o=t[0].name))&&p(r,"alt",o),(!f||b&4)&&U(n,"preview-modal__dialog--fly",t[2])},i(a){f||(a&&z(()=>{f&&(c||(c=J(e,Y,{duration:200},!0)),c.run(1))}),f=!0)},o(a){a&&(c||(c=J(e,Y,{duration:200},!1)),c.run(0)),f=!1},d(a){a&&F(e),t[7](null),a&&c&&c.end(),h=!1,q(u)}}}function qt(t,e,n){let{file:r,close:l}=e,o=!0,s;const i=document.documentElement.clientWidth,c=Math.abs(window.innerWidth-i);c>0&&(document.body.style.marginRight=`${c}px`),document.body.style.overflowY="hidden",ct(()=>{document.body.style.marginRight=null,document.body.style.overflowY=null});function f(d){oe.call(this,t,d)}function h(d){oe.call(this,t,d)}function u(d){oe.call(this,t,d)}function a(d){te[d?"unshift":"push"](()=>{s=d,n(3,s)})}const b=d=>{d.key=="Escape"&&l()},_=()=>{n(2,o=!1),s.focus()},g=()=>{n(2,o=!0)};return t.$$set=d=>{"file"in d&&n(0,r=d.file),"close"in d&&n(1,l=d.close)},[r,l,o,s,f,h,u,a,b,_,g]}class At extends _e{constructor(e){super(),de(this,e,qt,Ut,ce,{file:0,close:1})}}function Fe(t,e,n){const r=t.slice();return r[18]=e[n],r[20]=n,r}function Oe(t,e,n){const r=t.slice();return r[21]=e[n],r[20]=n,r}function Se(t,e,n){const r=t.slice();return r[23]=e[n],r[20]=n,r}function Mt(t){let e;return{c(){e=$("Â»")},m(n,r){S(n,e,r)},d(n){n&&F(e)}}}function Ce(t){let e,n,r,l=t[20]>0&&Mt();return n=new Tt({props:{breadcrumb:t[23],action:t[8],last:t[0].length==t[20]+1}}),{c(){l&&l.c(),e=N(),ae(n.$$.fragment)},m(o,s){l&&l.m(o,s),S(o,e,s),ne(n,o,s),r=!0},p(o,s){const i={};s&1&&(i.breadcrumb=o[23]),s&1&&(i.last=o[0].length==o[20]+1),n.$set(i)},i(o){r||(R(n.$$.fragment,o),r=!0)},o(o){O(n.$$.fragment,o),r=!1},d(o){o&&F(e),l&&l.d(o),re(n,o)}}}function Ne(t){let e,n,r=V(t[1]),l=[];for(let s=0;s<r.length;s+=1)l[s]=Pe(Oe(t,r,s));const o=s=>O(l[s],1,1,()=>{l[s]=null});return{c(){e=T("div");for(let s=0;s<l.length;s+=1)l[s].c();p(e,"class","grid"),p(e,"role","grid")},m(s,i){S(s,e,i);for(let c=0;c<l.length;c+=1)l[c]&&l[c].m(e,null);n=!0},p(s,i){if(i&1282){r=V(s[1]);let c;for(c=0;c<r.length;c+=1){const f=Oe(s,r,c);l[c]?(l[c].p(f,i),R(l[c],1)):(l[c]=Pe(f),l[c].c(),R(l[c],1),l[c].m(e,null))}for(M(),c=r.length;c<l.length;c+=1)o(c);j()}},i(s){if(!n){for(let i=0;i<r.length;i+=1)R(l[i]);n=!0}},o(s){l=l.filter(Boolean);for(let i=0;i<l.length;i+=1)O(l[i]);n=!1},d(s){s&&F(e),ye(l,s)}}}function Pe(t){let e,n;return e=new Ye({props:{file:t[21],action:t[8]}}),e.$on("remove",t[10](t[20],!0)),{c(){ae(e.$$.fragment)},m(r,l){ne(e,r,l),n=!0},p(r,l){const o={};l&2&&(o.file=r[21]),e.$set(o)},i(r){n||(R(e.$$.fragment,r),n=!0)},o(r){O(e.$$.fragment,r),n=!1},d(r){re(e,r)}}}function Ue(t){let e,n,r,l,o,s=V(t[2]),i=[];for(let f=0;f<s.length;f+=1)i[f]=qe(Fe(t,s,f));const c=f=>O(i[f],1,1,()=>{i[f]=null});return{c(){e=T("div"),n=T("div");for(let f=0;f<i.length;f+=1)i[f].c();p(n,"class","grid"),p(n,"role","grid"),p(e,"class","dropzone"),p(e,"role","button"),p(e,"tabindex","-1"),U(e,"dropzone--hovering",t[3])},m(f,h){S(f,e,h),L(e,n);for(let u=0;u<i.length;u+=1)i[u]&&i[u].m(n,null);r=!0,l||(o=[k(e,"drop",t[11]),k(e,"dragover",t[12]),k(e,"dragleave",t[13])],l=!0)},p(f,h){if(h&1540){s=V(f[2]);let u;for(u=0;u<s.length;u+=1){const a=Fe(f,s,u);i[u]?(i[u].p(a,h),R(i[u],1)):(i[u]=qe(a),i[u].c(),R(i[u],1),i[u].m(n,null))}for(M(),u=s.length;u<i.length;u+=1)c(u);j()}(!r||h&8)&&U(e,"dropzone--hovering",f[3])},i(f){if(!r){for(let h=0;h<s.length;h+=1)R(i[h]);r=!0}},o(f){i=i.filter(Boolean);for(let h=0;h<i.length;h+=1)O(i[h]);r=!1},d(f){f&&F(e),ye(i,f),l=!1,q(o)}}}function qe(t){let e,n;return e=new Ye({props:{file:t[18],action:t[9]}}),e.$on("remove",t[10](t[20],!1)),{c(){ae(e.$$.fragment)},m(r,l){ne(e,r,l),n=!0},p(r,l){const o={};l&4&&(o.file=r[18]),e.$set(o)},i(r){n||(R(e.$$.fragment,r),n=!0)},o(r){O(e.$$.fragment,r),n=!1},d(r){re(e,r)}}}function Ae(t){let e,n,r,l,o;return{c(){e=T("div"),n=T("div"),r=T("progress"),p(r,"class","upload__progress"),r.value="0",p(r,"max","100"),p(n,"class","upload__container"),p(e,"class","upload")},m(s,i){S(s,e,i),L(e,n),L(n,r),t[15](r),o=!0},p:B,i(s){o||(s&&z(()=>{o&&(l||(l=J(e,Y,{duration:200},!0)),l.run(1))}),o=!0)},o(s){s&&(l||(l=J(e,Y,{duration:200},!1)),l.run(0)),o=!1},d(s){s&&F(e),t[15](null),s&&l&&l.end()}}}function Me(t){let e,n;return e=new At({props:{file:t[4],close:t[16]}}),{c(){ae(e.$$.fragment)},m(r,l){ne(e,r,l),n=!0},p(r,l){const o={};l&16&&(o.file=r[4]),l&32&&(o.close=r[16]),e.$set(o)},i(r){n||(R(e.$$.fragment,r),n=!0)},o(r){O(e.$$.fragment,r),n=!1},d(r){re(e,r)}}}function jt(t){let e,n,r,l,o,s,i,c,f,h,u=V(t[0]),a=[];for(let m=0;m<u.length;m+=1)a[m]=Ce(Se(t,u,m));const b=m=>O(a[m],1,1,()=>{a[m]=null});let _=t[1].length>0&&Ne(t),g=t[2].length>0&&Ue(t),d=t[6]&&Ae(t),w=t[4]&&t[5]&&Me(t);return{c(){e=T("header"),e.innerHTML="<h2>C-Drive</h2>",n=N(),r=T("main"),l=T("div");for(let m=0;m<a.length;m+=1)a[m].c();o=N(),_&&_.c(),s=N(),g&&g.c(),i=N(),d&&d.c(),c=N(),w&&w.c(),f=lt(),p(e,"class","header"),p(l,"class","breadcrumbs")},m(m,v){S(m,e,v),S(m,n,v),S(m,r,v),L(r,l);for(let D=0;D<a.length;D+=1)a[D]&&a[D].m(l,null);L(r,o),_&&_.m(r,null),L(r,s),g&&g.m(r,null),S(m,i,v),d&&d.m(m,v),S(m,c,v),w&&w.m(m,v),S(m,f,v),h=!0},p(m,[v]){if(v&257){u=V(m[0]);let D;for(D=0;D<u.length;D+=1){const y=Se(m,u,D);a[D]?(a[D].p(y,v),R(a[D],1)):(a[D]=Ce(y),a[D].c(),R(a[D],1),a[D].m(l,null))}for(M(),D=u.length;D<a.length;D+=1)b(D);j()}m[1].length>0?_?(_.p(m,v),v&2&&R(_,1)):(_=Ne(m),_.c(),R(_,1),_.m(r,s)):_&&(M(),O(_,1,1,()=>{_=null}),j()),m[2].length>0?g?(g.p(m,v),v&4&&R(g,1)):(g=Ue(m),g.c(),R(g,1),g.m(r,null)):g&&(M(),O(g,1,1,()=>{g=null}),j()),m[6]?d?(d.p(m,v),v&64&&R(d,1)):(d=Ae(m),d.c(),R(d,1),d.m(c.parentNode,c)):d&&(M(),O(d,1,1,()=>{d=null}),j()),m[4]&&m[5]?w?(w.p(m,v),v&48&&R(w,1)):(w=Me(m),w.c(),R(w,1),w.m(f.parentNode,f)):w&&(M(),O(w,1,1,()=>{w=null}),j())},i(m){if(!h){for(let v=0;v<u.length;v+=1)R(a[v]);R(_),R(g),R(d),R(w),h=!0}},o(m){a=a.filter(Boolean);for(let v=0;v<a.length;v+=1)O(a[v]);O(_),O(g),O(d),O(w),h=!1},d(m){m&&(F(e),F(n),F(r),F(i),F(c),F(f)),ye(a,m),_&&_.d(),g&&g.d(),d&&d.d(m),w&&w.d(m)}}}function Bt(t){window.history.state!=t&&window.history.pushState(t,"",t?`?path=${encodeURIComponent(t)}`:"/")}function $t(t,e,n){let r,l=[],o=[],s=[],i=!1,c,f=!1,h=!1,u;window.addEventListener("popstate",y=>n(14,r=y.state)),document.body.addEventListener("contextmenu",y=>y.preventDefault()),r=new URLSearchParams(window.location.search).get("path");function a(y){yt(y).then(async C=>{if(C.ok){const P=await C.json();n(0,l=P.breadcrumbs),n(1,o=P.folders),n(2,s=P.files)}else console.log(C.status)})}function b(y){n(14,r=y.path),Bt(r)}function _(y){n(4,c=y),n(5,f=!0)}function g(y,C){return()=>{C?(o.splice(y,1),n(1,o)):(s.splice(y,1),n(2,s))}}function d(y){if(y.preventDefault(),n(3,i=!1),y.dataTransfer.types.includes("Files")){const C=new XMLHttpRequest;C.upload.addEventListener("progress",P=>{let me=Math.round(P.loaded/P.total*100);n(7,u.value=me,u)}),C.addEventListener("load",P=>{a(r),setTimeout(()=>n(6,h=!1),1e3)}),C.addEventListener("error",P=>{alert("Upload failed")}),C.addEventListener("abort",P=>{alert("Upload aborted")}),n(6,h=!0),kt(r||"",y.dataTransfer.files,C)}}function w(y){y.dataTransfer.types.includes("Files")&&(y.preventDefault(),n(3,i=!0))}function m(y){n(3,i=!1)}function v(y){te[y?"unshift":"push"](()=>{u=y,n(7,u)})}const D=()=>n(5,f=!1);return t.$$.update=()=>{t.$$.dirty&16384&&a(r)},[l,o,s,i,c,f,h,u,b,_,g,d,w,m,r,v,D]}class zt extends _e{constructor(e){super(),de(this,e,$t,jt,ce,{})}}new zt({target:document.body});
